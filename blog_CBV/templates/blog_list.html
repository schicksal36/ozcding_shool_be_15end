{% extends 'base.html' %}
{% block content %}
<h1>블로그 목록</h1>

<form method="get" style="margin-bottom: 10px;">
    <input
        name="qwer"
        type="text"
        placeholder="검색어를 입력하세요"
        value="{% if request.GET.qwer %}{{ request.GET.qwer }}{% endif %}">
    <button>검색</button>
</form>

<p style="text-align: right">
    <a href="{% url 'blog:create' %}">생성</a>
</p>

{% for blog in object_list %}
<p>
    <a href="{% url 'blog:detail' blog.pk %}">
        [{{ blog.get_category_display }}] {{ blog.title }} -
        <small>{{ blog.created_at|date:"Y-m-d" }}</small>
    </a>
</p>
{% endfor %}

<div class="pagination">

    {% if page_obj.has_previous %}
        <a href="?page=1{% if request.GET.qwer %}&qwer={{ request.GET.qwer }}{% endif %}">« 처음</a>
        <a href="?page={{ page_obj.previous_page_number }}{% if request.GET.qwer %}&qwer={{ request.GET.qwer }}{% endif %}">이전</a>
    {% endif %}

    {% for i in page_obj.paginator.page_range %}
        {% if i >= page_obj.number|add:"-2" and i <= page_obj.number|add:"2" %}
            {% if page_obj.number == i %}
                <strong>[{{ i }}]</strong>
            {% else %}
                <a href="?page={{ i }}{% if request.GET.qwer %}&qwer={{ request.GET.qwer }}{% endif %}">{{ i }}</a>
            {% endif %}
        {% endif %}
    {% endfor %}

    {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}{% if request.GET.qwer %}&qwer={{ request.GET.qwer }}{% endif %}">다음</a>
        <a href="?page={{ page_obj.paginator.num_pages }}{% if request.GET.qwer %}&qwer={{ request.GET.qwer }}{% endif %}">마지막 »</a>
    {% endif %}

</div>

{% endblock %}
