from django.db import models

# Create your models here.
from django.conf import settings
from django.db import models


class Profile(models.Model):
    """
    =============================================================================
    ✅ Profile (신상정보) 모델
    -----------------------------------------------------------------------------
    - 유저(User)와 1:1로 연결되는 신상정보 테이블
    - 회원가입 후 추가 정보 입력용으로 많이 사용
    =============================================================================
    """

    # ============================================================================
    # ✅ user: 사용자 (1:1 관계)
    # ----------------------------------------------------------------------------
    # - OneToOneField → 유저 1명당 프로필 1개
    # - related_name="profile"
    #   → user.profile 로 바로 접근 가능
    # ============================================================================
    user = models.OneToOneField(
        settings.AUTH_USER_MODEL,
        on_delete=models.CASCADE,
        related_name="profile",
        verbose_name="사용자",
    )

    # ============================================================================
    # ✅ name: 이름
    # ============================================================================
    name = models.CharField("이름", max_length=50)

    # ============================================================================
    # ✅ birth_date: 생년월일
    # ============================================================================
    birth_date = models.DateField("생년월일", null=True, blank=True)

    # ============================================================================
    # ✅ gender: 성별 (선택지)
    # ============================================================================
    GENDER_CHOICES = (
        ("M", "남성"),
        ("F", "여성"),
        ("O", "기타"),
    )
    gender = models.CharField(
        "성별",
        max_length=1,
        choices=GENDER_CHOICES,
        null=True,
        blank=True,
    )

    # ============================================================================
    # ✅ phone: 전화번호
    # ============================================================================
    phone = models.CharField(
        "전화번호",
        max_length=20,
        null=True,
        blank=True,
    )

    # ============================================================================
    # ✅ address: 주소
    # ============================================================================
    address = models.CharField(
        "주소",
        max_length=255,
        null=True,
        blank=True,
    )

    # ============================================================================
    # ✅ created_at / updated_at
    # ============================================================================
    created_at = models.DateTimeField("생성일", auto_now_add=True)
    updated_at = models.DateTimeField("수정일", auto_now=True)

     # ✅ 프로필 사진
    profile_image = models.ImageField(
        "프로필 사진",
        upload_to="profiles/",   # media/profiles/ 아래 저장
        null=True,
        blank=True,
    )


    # ============================================================================
    # ✅ 문자열 표현
    # ============================================================================
    def __str__(self):
        return f"{self.user.username}의 프로필"

    class Meta:
        verbose_name = "신상정보"
        verbose_name_plural = "신상정보 목록"
